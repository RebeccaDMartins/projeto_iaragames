<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/styles/login.css">

    <title>Login - Iara Games</title>

    <link rel="shortcut icon" href="../../assets/icon/novo/favicon.png" type="image/png">
</head>

<body>
    <div class="voltar">
        <img src="../../assets/icon/novo/voltar.png" alt="Voltar à página inicial da Iara games"><a
            href="../../index.html">Página Inicial</a>
    </div>

    <div class="container">
        <div class="logo">
            <img src="../../assets/icon/novo/logo iara.png" alt="Logo Iara Games">
        </div>
        <h2>Acesse sua conta</h2>

        <form id="formLogin">
            <div>
                <input type="email" id="email" name="email" placeholder="Digite seu e-mail" required>
                <input type="password" id="senha" name="senha" placeholder="Senha" required>
            </div>
            <p class="esqueceu-senha">Esqueceu sua senha?</p>
            <button type="submit">Entrar</button>
        </form>


        <div class="cadastro">
            <a href="../../pages/pagina-cadastro/cadastronovo.html">Primeira vez na Iara Games? Cadastre-se</a>
        </div>

        <p class="login-google">ou faça login com</p>
        <div class="icon-google">
            <img src="../../assets/icon/redes-sociais/google icon.png" alt="Faça o login com sua conta Google">
        </div>
    </div>

    <script>
        document.getElementById("formLogin").addEventListener("submit", function (e) {
            e.preventDefault();

            const email = document.getElementById("email").value;
            const senha = document.getElementById("senha").value;

            fetch("http://localhost:8080/api/usuarios/login", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ email, senha })
            })
                .then(response => {
                    if (response.ok) {
                        window.location.href = "../home-logado/home.html";
                    } else {
                        alert("Usuário ou senha inválidos");
                    }
                })
                .catch(error => {
                    console.error("Erro ao conectar com a API:", error);
                    alert("Erro de conexão com o servidor.");
                });
        });
    </script>

</body>

</html>